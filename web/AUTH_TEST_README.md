# 用户认证测试界面

这是一个用于测试Spring Boot后端用户认证系统的前端界面。

## 功能特性

### 🔐 认证功能
- **用户注册**: 支持用户名、邮箱、密码验证
- **用户登录**: JWT双令牌认证
- **自动令牌刷新**: 自动处理token过期
- **安全登出**: 清除本地存储和服务器端token

### 🧪 API测试
- **公开端点**: 无需认证的测试端点
- **用户端点**: 需要登录才能访问
- **管理员端点**: 需要管理员权限才能访问
- **实时响应**: 显示API调用的详细响应

## 使用方法

### 1. 启动后端服务
```bash
cd backend
mvn spring-boot:run
```

### 2. 启动前端服务
```bash
cd web
npm run dev
```

### 3. 访问测试界面
打开浏览器访问: http://localhost:5173

## 默认测试用户

### 管理员用户
- **用户名**: `admin`
- **密码**: `admin123`
- **角色**: `ADMIN`
- **权限**: 可以访问所有端点

### 普通用户
- **用户名**: `testuser`
- **密码**: `test123`
- **角色**: `USER`
- **权限**: 可以访问用户端点和公开端点

## 测试流程

### 1. 登录测试
1. 点击"登录/注册"按钮
2. 选择"登录"模式
3. 输入用户名和密码
4. 点击"登录"按钮
5. 查看登录成功提示

### 2. 注册测试
1. 点击"登录/注册"按钮
2. 选择"注册"模式
3. 填写用户名、邮箱、密码
4. 点击"注册"按钮
5. 查看注册成功提示

### 3. API测试
1. 登录后，在"API测试"区域
2. 点击不同的测试按钮
3. 查看响应结果
4. 验证权限控制是否正常

### 4. 权限测试
- **未登录**: 只能访问公开端点
- **普通用户**: 可以访问用户端点和公开端点
- **管理员**: 可以访问所有端点

## 技术实现

### 前端技术
- **React 18**: 用户界面框架
- **TypeScript**: 类型安全
- **Modern UI Components**: 组件库
- **Fetch API**: HTTP请求

### 后端集成
- **JWT认证**: 双令牌策略
- **RESTful API**: 标准API设计
- **CORS支持**: 跨域请求
- **错误处理**: 统一错误响应

### 数据存储
- **LocalStorage**: 存储token和用户信息
- **自动清理**: 登出时清除所有数据
- **持久化**: 刷新页面后保持登录状态

## 故障排除

### 常见问题

1. **网络错误**
   - 检查后端服务是否启动
   - 确认端口8080是否可用
   - 检查防火墙设置

2. **登录失败**
   - 确认用户名密码正确
   - 检查数据库连接
   - 查看后端日志

3. **权限错误**
   - 确认用户角色正确
   - 检查token是否有效
   - 验证API端点权限

4. **界面问题**
   - 清除浏览器缓存
   - 检查控制台错误
   - 确认组件库版本

## 开发说明

### 项目结构
```
web/src/
├── App.tsx              # 主应用组件
├── components/
│   ├── AuthModal.tsx    # 认证模态框
│   ├── UserProfile.tsx  # 用户信息显示
│   └── ApiTester.tsx    # API测试组件
└── main.tsx             # 应用入口
```

### 自定义配置
- 修改API基础URL: 在组件中更改`http://localhost:8080/api`
- 添加新的测试端点: 在`ApiTester.tsx`中添加
- 自定义UI样式: 修改CSS类名或添加自定义样式

## 安全注意事项

1. **生产环境**: 不要在生产环境使用默认密码
2. **HTTPS**: 生产环境必须使用HTTPS
3. **Token安全**: 定期轮换JWT密钥
4. **输入验证**: 前端验证不能替代后端验证
5. **错误信息**: 不要暴露敏感的错误信息
